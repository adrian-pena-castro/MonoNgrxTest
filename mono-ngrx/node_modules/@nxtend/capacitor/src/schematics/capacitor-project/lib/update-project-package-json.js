"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateProjectPackageJson = void 0;
const versions_1 = require("../../../utils/versions");
function updateProjectPackageJson(options) {
    return (host) => {
        if (!host.exists(`${options.projectRoot}/package.json`)) {
            return host.create(`${options.projectRoot}/package.json`, JSON.stringify({
                name: options.project,
                devDependencies: {
                    '@capacitor/cli': versions_1.capacitorVersion,
                },
            }));
        }
        const packageJson = JSON.parse(host.read(`${options.projectRoot}/package.json`).toString());
        if (!packageJson.devDependencies) {
            packageJson.devDependencies = {};
        }
        if (!packageJson.devDependencies['@capacitor/cli']) {
            packageJson.devDependencies['@capacitor/cli'] = versions_1.capacitorVersion;
        }
        return host.overwrite(`${options.projectRoot}/package.json`, JSON.stringify(packageJson));
    };
}
exports.updateProjectPackageJson = updateProjectPackageJson;
//# sourceMappingURL=update-project-package-json.js.map
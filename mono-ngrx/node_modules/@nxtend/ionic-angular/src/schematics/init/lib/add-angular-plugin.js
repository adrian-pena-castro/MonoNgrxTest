"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addAngularPlugin = void 0;
const schematics_1 = require("@angular-devkit/schematics");
const workspace_1 = require("@nrwl/workspace");
function addAngularPlugin() {
    return (host) => {
        const packageJson = workspace_1.readJsonInTree(host, 'package.json');
        const hasNrwlAngularDep = packageJson.dependencies && packageJson.dependencies['@nrwl/angular'];
        const hasNrwlAngularDevDep = packageJson.devDependencies &&
            packageJson.devDependencies['@nrwl/angular'];
        if (!hasNrwlAngularDep && !hasNrwlAngularDevDep) {
            const nxVersion = packageJson.devDependencies['@nrwl/workspace']
                ? packageJson.devDependencies['@nrwl/workspace']
                : packageJson.dependencies['@nrwl/workspace'];
            if (!nxVersion) {
                throw new Error('@nrwl/workspace is not installed as a dependency.');
            }
            return workspace_1.addDepsToPackageJson({}, {
                '@nrwl/angular': nxVersion,
            });
        }
        else {
            return schematics_1.noop();
        }
    };
}
exports.addAngularPlugin = addAngularPlugin;
//# sourceMappingURL=add-angular-plugin.js.map